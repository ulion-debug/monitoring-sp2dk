{% extends "dashboard/base.html" %}
{% block content %}

{% if messages %}
  <div class="mb-3">
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show shadow-sm" role="alert">
        <strong>
          {% if message.tags == "success" %}
            ✅ Berhasil!
          {% elif message.tags == "error" %}
            ❌ Gagal!
          {% elif message.tags == "warning" %}
            ⚠️ Perhatian!
          {% else %}
            ℹ️ Info
          {% endif %}
        </strong>
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
    {% endfor %}
  </div>
{% endif %}

<h4 class="fw-bold mb-3">Upload Data</h4>

<div class="card p-3 mb-3">
    <h6>Upload DPP (CSV)</h6>
    <form method="post" action="{% url 'upload_dpp' %}" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="file" name="file" class="form-control mb-2" required>
        <button class="btn btn-warning">Upload DPP</button>
    </form>
</div>

<div class="card p-3 mb-3">
    <h6>Upload SP2DK Tahun Berjalan (XLSX)</h6>
    <form method="post" action="{% url 'upload_sp2dk_current' %}" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="file" name="file" class="form-control mb-2" required>
        <button class="btn btn-success">Upload SP2DK Current</button>
    </form>
</div>

<div class="card p-3">
    <h6>Upload SP2DK Tahun Sebelumnya (XLSX)</h6>
    <form method="post" action="{% url 'upload_sp2dk_previous' %}" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="file" name="file" class="form-control mb-2" required>
        <button class="btn btn-primary">Upload SP2DK Previous</button>
    </form>
</div>

<script>
  setTimeout(function () {
    document.querySelectorAll('.alert').forEach(alert => {
      alert.style.transition = "opacity 0.5s";
      alert.style.opacity = "0";
      setTimeout(() => alert.remove(), 500);
    });
  }, 4000);
</script>

{% endblock %}
